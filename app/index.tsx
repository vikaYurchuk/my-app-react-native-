import React, { useState } from "react";
import { View, Button, Alert, StyleSheet } from "react-native";

export default function App() {
  const questions: string[] = [
    "Ти, як правило, завжди буваєш всім задоволений?",
    "Тобі іноді заважають заснути різні думки?",
    "Чи було коли-небудь так, що тобі довірили таємницю, а ти з яких-небудь причин не зміг її зберегти?",
    "Чи було коли-небудь так, що тобі стає сумно без особливої причини?",
    "Чи любиш ти жартувати над ким-небудь?",
    "Чи можеш ти сказати про себе, що ти взагалі весела людина?",
    "Чи часто ти потребуєш допомоги інших хлопців?",
    "Чи часто у тебе міняється настрій?",
    "Якщо ти хочеш познайомитися з іншим хлопчиком або дівчинкою, то ти завжди першим починаєш розмову?",
    "Якщо ти опиняєшся в дурному становищі, то ти потім довго розбудовуєшся?",
    "Як часто ти відволікаєшся, коли робиш уроки?",
    "Як ти думаєш, тебе вважають веселою людиною?",
    "Чи траплялося тобі говорити про будь-кого погано?",
    "Чи можеш ти сказати, що ти трохи більше образливий людина, ніж інші?",
    "Чи можеш ти сказати про себе, що ти безтурботна людина?",
    "Чи можеш ти веселитися, не стримуючи себе, в компанії інших хлопців?",
    "Чи було коли-небудь так, що тебе попросили допомогти у будинку по господарству, а ти з якоїсь причини не зміг цього зробити?",
    "Чи буває таке, що тобі іноді більше подобається бути одному, ніж зустрічатися з іншими хлопцями?",
    "Чи буває таке, що, перебуваючи в суспільстві інших хлопців, ти найчастіше мовчиш?",
    "Чи буває, що ти так хвилюєшся, що не можеш всидіти на місці?",
    "Чи буває, що у тебе без особливої причини паморочиться голова?",
    "Чи бувало таке, щоб ти коли-небудь грубо розмовляв з батьками?",
    "Чи буває так, що твоє серце починає сильно битися, навіть якщо ти майже не хвилюєшся?",
    "Тобі подобалася б така робота, де все треба робити дуже швидко?",
    "Тобі часом сняться страшні сни?",
    "У тебе часом буває таке відчуття, що тобі все набридло?",
    "Чи був хоча б раз у твоєму житті випадок, коли тобі було дуже погано?",
    "Чи буває так, що іноді тебе майже все дратує?",
    "Тобі подобається перебувати в голосливій та веселій компанії?",
    "Тобі подобається жартувати і розповідати веселі історії своїм друзям?",
    "Тобі завжди подобається грати з іншими хлопцями?",
    "Ти можеш без особливих зусиль розвеселити компанію нудьгуючих?",
    "Ти любиш часто ходити в гості?",
    "Ти любиш іноді похвалитися?",
    "Ти коли-небудь порушував правила поведінки в Коледжі?",
    "Ти коли-небудь говорив неправду?",
    "Ти іноді відчуваєш себе втомленим без особливої причини?",
    "Ти зазвичай швидко приймаєш рішення?",
    "Ти завжди їж все, що тобі дають?",
    "Ти завжди виконуєш те, що тобі кажуть?",
    "Ти жартуєш іноді в групі, особливо якщо там немає вчителя?",
    "Ти дуже розбудовуєшся, коли тебе дають за що-небудь?",
    "Тебе взагалі легко образити або засмутити?",
    "Коли тебе про щось просять, тобі завжди важко відмовляти?",
    "Коли тебе про що-небудь запитують, ти найчастіше швидко знаходиш відповідь?",
    "Буваєш ти дуже сердитим, дратівливим?",
    "Чи буває таке, що тобі не хочеться брати участь в загальному святкуванні?",
    "Кажеш ти іноді перше, що спадає на думку?",
    "Буває, що ти відчуваєш себе самотнім?",
    "Коли хто-небудь кричить на тебе, ти теж кричиш у відповідь?",
    "На тебе впливає погода?",
    "Ти зазвичай соромишся заговорити першим з незнайомими людьми?",
    "Ти майже завжди впевнений, що впораєшся зі справою, за яку взявся?",
    "Ти часто спохвачуєшся, коли вже пізно?",
    "Тобі іноді здається, що важко отримати справжнє задоволення від компанії?"
  ];

  const [i, setI] = useState<number>(0);
  const [sumScore, setSumScore] = useState<number>(0);

  const startTest = () => {
    setI(0);
    setSumScore(0);
    askQuestion(0);
  };

  const askQuestion = (idx: number) => {
    if (idx >= questions.length) {
      showResult();
      return;
    }
    const qText = questions[idx];
    Alert.alert(
      `Питання ${idx + 1}/${questions.length}`,
      qText,
      [
        {
          text: "Так",
          onPress: () => {
            setSumScore((prev) => prev + 1);
            askQuestion(idx + 1);
          },
        },
        {
          text: "Іноді",
          onPress: () => {
            setSumScore((prev) => prev + 0.5);
            askQuestion(idx + 1);
          },
        },
        {
          text: "Ні",
          onPress: () => {
            askQuestion(idx + 1);
          },
        },
      ],
      { cancelable: false }
    );
  };

  const showResult = () => {
    const total = sumScore;
    let result = "";

    if (total <= 13) {
      result = "Інтроверт";
    } else if (total <= 27) {
      result = "Флегматик-інтроверт";
    } else if (total <= 40) {
      result = "Холерик-інтроверт";
    } else {
      result = "Меланхолік-інтроверт";
    }

    Alert.alert("Результат", `Ваш тип: ${result}\nСума балів: ${total}`);
  };

  return (
    <View style={styles.container}>
      <Button title="Старт тесту" onPress={startTest} />
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, justifyContent: "center", alignItems: "center" },
});
